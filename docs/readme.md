# ðŸ¥© The Neural Pitmaster: Agentic AI Control Plane

> **"Moving beyond CRUD: An Event-Driven, Autonomous AI Orchestrator."**

## 1. Executive Summary
**The Neural Pitmaster** (Better BBQ API v2) allows developers to interact with physical hardware not as passive machines, but as **Autonomous Agents**.

By leveraging **Server-Sent Events (SSE)** for real-time telemetry and a **Local Llama 3.2** model for cognition, this project demonstrates a "Local-First" AI architecture. It transforms Postman from a simple request client into a live **Command & Control Dashboard**.

---

## 2. Architecture & Design

### 2.1 The Stack (The "What")
* **Host:** Bazzite (Atomic Fedora Linux)
* **Container:** Distrobox (Isolated Dev Environment)
* **API:** FastAPI (Python Async)
* **Database:** SQLite (WAL Mode for High Concurrency)
* **Intelligence:** Ollama (Llama 3.2 via Localhost)
* **Visualization:** Postman Visualizer (HTML5/Chart.js)

### 2.2 The Narrative (The "Why")
Standard APIs are **Request/Response** (Passive). This system is **Event-Driven** (Active).
1.  **Physics Engine:** A background thread simulates thermodynamics (Newton's Law of Cooling).
2.  **Cognition Loop:** The AI Agent observes state changes at 10Hz.
3.  **Thought Stream:** The Agent pushes "reasoning logs" to the client via SSE.
4.  **Reaction:** The client (Postman) renders these thoughts in real-time.

---

## 3. Operational Workflow (The Demo)

This project utilizes **Postman** as the primary User Interface.

### Step 1: Spawn Agent (POST)
* **Endpoint:** `POST /grills`
* **Action:** Deploys a new autonomous entity into the simulation.
* **Return:** Unique Agent ID (e.g., `g-e805`).

### Step 2: Establish Neural Uplink (GET Stream)
* **Endpoint:** `GET /grills/{agent_id}`
* **Action:** Opens the Server-Sent Events (SSE) Channel.
* **Visualization:** Click the **"Visualize"** tab to render the Real-Time Dashboard.
* **Status:** `CONNECTING...` (Green).

### Step 3: Command & Control (PATCH)
* **Endpoint:** `PATCH /grills/{agent_id}`
* **Payload:** `{"target_temp": 225}`
* **Effect:** Wakes the AI. Status changes to **HEATING** (Red).
* **Observation:** Watch the Visualizer graph rise and the AI logs generate text automatically.

---

## 4. Developer Notes

### 4.1 Debugging
* **Kill Switch:** `pkill -f python` (Hard stop for all agents).
* **Postman Console:** `Ctrl + Alt + C` (View raw network traffic/headers).
* **Visualizer Debug:** `Ctrl + Shift + I` (Inspect the injected HTML/JS frame).

### 4.2 Documentation Strategy
* **Static Docs:** The `docs/` folder contains markdown files (Architecture, Plans) for the repository.
* **Dynamic Docs:** The **OpenAPI Spec** (Swagger UI) is auto-generated by FastAPI at runtime.
    * **Access:** `http://localhost:8000/docs` (Only available when server is running).
    * **Note:** No manual YAML is required; the code is the Single Source of Truth.

### 4.3 Design Patterns
* **Singleton Pattern:** Database Connection (optimized with `sqlite3.Row` factory).
* **Observer Pattern:** SSE Stream listening for State Changes.
* **Feedback Loop:** PID Controller logic implemented in `src/services/physics.py`.
* **Concurrency:** SQLite **WAL Mode** (Write-Ahead Logging) enabled to prevent locking during simultaneous Stream/Write operations.

### 4.4 "KISS" Version
A simplified, non-AI version of the server is available at `src/simple.py` for architecture comparison.
* **Run Main:** `python -m src.main` (Full AI)
* **Run Simple:** `uvicorn src.simple:app` (Basic CRUD)

---

> *Built on Linux | Deployed via Distrobox | Orchestrated by Postman*
